from AnalysisThread import AnalyzeGraph
from sys import stdin
# JSON DB Organization
# Typical line in router should look like:
# [ router1, router2, ...... ]
# where each is 
# [ .... , 
#    {    "router_id": 0, "session_id": 2511, "session_type": "L2_DRAM", "response_ts": 0.000449854, 
#    "request_ts": 0.000449374, "request_out_port": 2, "response_out_port": 2 }, ...... ]


class AnalyzePorts(AnalyzeGraph):
    
    def analyze(self, entry_name):
        router_id = self.parser.toJsonEntry(entry_name)
        type = entry_name[1]
        router = self.json[router_id]
        
        print "Please enter source dest pair"
        ln = stdin.readline()
        
        parts = ln.split(" ")
        source = int(parts[0])
        dest = int(parts[1])
        
        entry = { "x":[], "y": []}
        for session in router:
            store = False
            if session["session_type"]!=type:
                continue
            if(source == 4 or dest == 4): #Router traversal is noted by x,x pairs
                if(session["request_out_port"]==session["response_out_port"]):
                    store = True
            
        
        
        #return AnalyzeGraph.analyze(self, db, entry_name)
        